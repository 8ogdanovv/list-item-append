require(['jquery','idus_dataLayer','domReady!'],function($){'use strict';var SELECTORS={filterOptionsItem:'.filter-options-item',sorterSelect:'.sorter-options'};$(document).on('idus-layeredNavigationFilterSuccess',function(){var filteredAttributes=getFilteredAttributes();if(!filteredAttributes.length)return;var filterData={};for(var i=0;i<filteredAttributes.length;i++){var attribute=filteredAttributes[i];var selectedOptions=getSelectedOptionsForAttribute(attribute);selectedOptions=selectedOptions.join(',');filterData['filter_'+attribute]=selectedOptions;}
var sorterData=getSorterOption();if(sorterData)filterData['sort']=sorterData;if(filterData){window.idusDataLayer.push({customEvent:'CategoryFilter',customData:filterData});}});function getFilteredAttributes(){var filteredAttributes=[];$(SELECTORS.filterOptionsItem+'.has_filter').each(function(){filteredAttributes.push(this.dataset.filter);});return filteredAttributes;}
function getSelectedOptionsForAttribute(attribute){var filterElement=$(SELECTORS.filterOptionsItem+'[data-filter="'+attribute+'"]');if(!filterElement.length)return[];var selectedOptionsElements=filterElement.find('.selected');if(!selectedOptionsElements.length)return[];var selectedOptions=[];selectedOptionsElements.each(function(){if($(this).attr('option-label'))selectedOptions.push($(this).attr('option-label'));});return selectedOptions;}
function getSorterOption(){var sorter=$(SELECTORS.sorterSelect);if(sorter.hasClass('active'))return sorter.find('option:selected').text().trim();return null;}});