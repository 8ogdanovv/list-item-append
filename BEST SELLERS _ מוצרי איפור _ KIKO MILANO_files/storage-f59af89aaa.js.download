(function(){var e=undefined;(function(){function c(i,o,s){function u(r,e){if(!o[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[r]={exports:{}};i[r][0].call(a.exports,function(e){var t=i[r][1][e];return u(t||e)},a,a.exports,c,i,o,s)}return o[r].exports}for(var f="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}return c})()({"/home/jarvis/nodeapp/client/js/record/storage.js":[function(e,t,r){"use strict";var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,r){if(t)n(e.prototype,t);if(r)n(e,r);return e}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i="uxld_";var o="uxl_send";var s=false;var u=function(){function e(){a(this,e);var n=this;try{if(!window.sessionStorage)return}catch(e){return}window.addEventListener("message",function(e){var t=e.data[0];var r=e.data[1];if(t==="post"){n.store(r)}else if(t==="clear"){n.clear()}else if(t==="send"){n.startSending()}else if(t==="stop"){window.localStorage.setItem(o,"0")}else if(t==="request-params"){n.requestParams=r}});setInterval(function(){n.push()},2e3)}n(e,[{key:"keyPrefix",value:function e(){return i+window.apiKey+"_"}},{key:"serializeStorage",value:function e(t){if(window.document.documentMode){return btoa(t)}return t}},{key:"deSerializeStorage",value:function e(t){if(window.document.documentMode){return atob(t)}return t}},{key:"store",value:function e(t){var r=this;var n=r.keyPrefix()+(new Date).getTime().toString();try{window.sessionStorage.setItem(n,r.serializeStorage(t))}catch(e){}}},{key:"allDataKeys",value:function e(){var t=new RegExp(""+this.keyPrefix());return Object.keys(window.sessionStorage).filter(function(e){return t.test(e)})}},{key:"push",value:function e(){if(!this.canSend())return;if(s)return;s=true;var t=this;var r=t.allDataKeys();var n=[];for(var a=r.length-1;a>=0;a--){n.push(t.deSerializeStorage(window.sessionStorage.getItem(r[a])));window.sessionStorage.removeItem(r[a])}if(n.length){var i=JSON.parse(JSON.stringify(t.requestParams));i.body=JSON.stringify(n);fetch(i.url,i)}s=false}},{key:"clear",value:function e(){this.allDataKeys().map(function(e){window.sessionStorage.removeItem(e)})}},{key:"startSending",value:function e(){window.localStorage.setItem(o,(new Date).getTime());this.push()}},{key:"canSend",value:function e(){var t=parseInt(window.localStorage.getItem(o));var r=(new Date).getTime();return r-t<3600*1e3}},{key:"execute",value:function e(t){if(t.data.action==="clear"){this.clear()}else if(t.data.action==="send"){this.startSending()}else if(t.data.action==="stop"){window.localStorage.setItem(o,"0")}else if(t.data.action==="request-params"){this.requestParams=t.data.params}}}]);return e}();new u},{}]},{},["/home/jarvis/nodeapp/client/js/record/storage.js"])})();